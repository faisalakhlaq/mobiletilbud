{% extends 'base.html' %}
{% load i18n %}
{% load static %}
{% block extra_head %}
        <link rel='stylesheet' href="{% static '/main.css'%}">
{% endblock %}

{% block title %} {% translate "Offers" %} | {{ block.super }}
{% endblock title %}

{% block content %}
<div class='offer_list_container'>
    <h3 class="offer-header">
        {% trans "POPULAR OFFERS" %}<h3>
    <div class='company-list'>
        <form method='GET' action=''>
            <input name="offer" class="btn btn-info m-1" 
            type="submit" value='All'/>
            <input name="offer" class="btn btn-info m-1" 
            type="submit" value='Popular' />
            {% for tele_company in tele_companies %}
                <input name="company" class="btn btn-info m-1" 
                type="submit" value={{tele_company}} />
            {% endfor %}
        </form>
    </div>
    <div class='search-field'><form class='form' method='GET' action=''>
        <input id='query' type='text' placeholder='{% trans 'Search..'%}' 
        name='query' value={{ request.GET.query}}>
        <button id='search_btn' class='btn btn-default bg-info text-light' 
        type='submit'>{% trans 'Search..'%}</button>
    </form></div>
    <div class="card-group">
        {% if not object_list %}
        <h3>{% trans "No Offers Here" %}<h3>
        {% endif %}
        {% for offer in object_list %}
        {% include 'offer/offer_card_snippet.html' with offer=offer%}
        {% endfor %}
    </div>
</div>
{% include 'paginator_template.html' with page_obj=page_obj %}
{% endblock content %}
{% block extra_scripts %}
<script>
  $(function() {
    $( "#query" ).autocomplete({
      source: "/tilbud_search_auto_complete",
      select: function (event, ui) { //item selected
        AutoCompleteSelectHandler(event, ui)
      },
      minLength: 2,
    });
  });
  function AutoCompleteSelectHandler(event, ui)
  {
    var selectedObj = ui.item;
  }
  // TODO call the below function if the user has
  // clicked / choosen one option from given list
  function SearchHandler()
  {
    $( "#search_btn" ).click()
  }
</script>
{% endblock extra_scripts %}
